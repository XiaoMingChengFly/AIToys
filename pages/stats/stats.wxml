<view class="container">
  <view class="card">
    <view class="title">概览</view>
    <view>总局数：{{summary.roundCount}}</view>
    <view>参赛人次：{{summary.entryCount}}</view>
    <view>累计总分：{{summary.totalScore}}</view>
  </view>

  <view class="card">
    <view class="title">玩家排行榜</view>
    <block wx:if="{{ranking.length}}">
      <block wx:for="{{ranking}}" wx:key="name" wx:for-item="player" wx:for-index="idx">
        <view style="display:flex; justify-content:space-between; margin-bottom: 10rpx;">
          <text>{{idx + 1}}. {{player.name}}（{{player.rounds}}局）</text>
          <text style="font-weight:600;">{{player.total}}</text>
        </view>
      </block>
    </block>
    <view wx:else>暂无记录，先去“记一局”添加数据。</view>
  </view>

  <view class="card">
    <view class="title">最近记录</view>
    <block wx:for="{{rounds}}" wx:key="id" wx:for-item="round">
      <view class="round-item">
        <view class="round-head">
          <view style="font-weight:600;">{{round.roundName}}（{{round.date}}）</view>
          <button size="mini" type="warn" plain data-id="{{round.id}}" bindtap="removeRound">删除</button>
        </view>
        <block wx:for="{{round.players}}" wx:key="name" wx:for-item="player">
          <view style="display:flex; justify-content:space-between; color:#334155; margin-top: 4rpx;">
            <text>{{player.name}}</text>
            <text>{{player.score}}</text>
          </view>
        </block>
        <view wx:if="{{round.note}}" style="color:#64748b; margin-top: 8rpx;">备注：{{round.note}}</view>
      </view>
    </block>
  </view>
</view>
